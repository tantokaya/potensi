trulia=trulia||{},trulia.homepage=trulia.homepage||{},trulia.homepage=function($){var e={},o=$(window);return e.init=function(o){$("#homepageSearchTabs").truliaTabs(),$(".module.moving-help-data").click(function(){o_track_ql_click("home:B|modulesTop|link::Move.com|clicked")}),trulia.homepage.heroBannerModule.init(o),o.isDefault&&(trulia.homepage.mobileModule.init(),$("#pro_catcher").length&&e.agentAdsInit(o.agentAds.hide_forever_cookie_name),e.track(),e.lazyLoadInit()),"#rwli=1"!==location.hash||_trulia_logged_in||trulia.AuthPopup.show()},e.agentAdsInit=function(e){var o=$("#pro_catcher");o.on("click","#pro_catcher_close",function(t){t.preventDefault(),o.slideUp(500),o_track_ql_click("AgentProCatcher|Home|Close"),setCookie(e,1,build_cookie_exp_date(1800))}),null===getCookie(e)&&(o.delay(2e3).slideDown(500).on("click","#pro_catcher_contact",function(){$(this).attr("disabled","disabled"),o_track_ql_click("AgentProCatcher|Home|Contact"),setCookie(e,1,build_cookie_exp_date(1800));var t=null;t="undefined"==typeof _SITE_ROOT?site_root:_SITE_ROOT,$.get(t+"q_homepage_contact.php",function(e){o.find("#pro_catcher_text").html("Thanks for your interest! We'll be in touch with you shortly.")})}),trulia.track({name:"AgentProCatcher|Home|Imp"}))},e.track=function(){var e=$("#content");e.on("click","a",function(){var e=$(this).attr("title"),o=$(this).parents("section").attr("id");trulia.track({props:{33:s.pageName+"|"+o+"|link::"+e+"|clicked"}})});var t=["modulesTop","mobile","mortgage","monetization"],a={modulesTop:!1,mobile:!1,mortgage:!1,monetization:!1,total:0},r=function(){for(var i=0;3>=i;i++)a[t[i]]||o.scrollTop()+o.height()>=e.find("#"+t[i]).offset().top+e.find("#"+t[i]).outerHeight()&&(trulia.track({props:{33:s.pageName+"|"+t[i]+"|displayed"}}),a[t[i]]=!0,a.total++);a.total>=t.length&&o.off("scroll",r)};o.on("scroll",r)},e.lazyLoadInit=function(){$("img[data-lazy-src]").hide().load(function(e){$(e.target).fadeIn(300)})},e}(jQuery),trulia=trulia||{},trulia.homepage=trulia.homepage||{},trulia.homepage.heroBannerModule={},trulia.homepage.heroBannerModule=function($){var e={},o=$(window),t=$("#content"),a=trulia.browser.isIphone||trulia.browser.isIpad||trulia.browser.isAndroid,r=trulia.browser.isMSIE&&trulia.browser.version<=8,i=trulia.browser.isMSIE&&11===trulia.browser.version,n=trulia.browser.isMSIE,l=$("#global-sub-nav").outerHeight(),c=!1,h=$("#rent_search_parameters_toggle"),u=$("#searchbox_form");e.options=window.heroBannerOptions||{heroImages:["http://static.trulia-cdn.com/images/homepage/hero_banner_v3.jpg"],transitionDelay:5e3,transitionDuration:2e3};var p=!1,d=0,m=null;return e.setOptions=function(e){this.options=e},e.init=function(i){$(".selectPretty").truliaSelect(),e.prevalidateSearchInit();var p=$(".searchbox_form_location");p.autosuggest({data:{types:["neighborhood","zipCode","city","county","address","street"],isSellerSearchType:c},display:{width_offset:-1,position_offset:{top:-6,left:0},tracking_string:"homepage",allow_invalid:!0,submit_on_enter_select:!0,value_field:"input[name=locationId]",ac_entered_query:"input[name=ac_entered_query]",ac_index:"input[name=ac_index]",propertyId_field:"input[name=propertyId]",propertyIndex_field:"input[name=propertyIndex]",locationType_field:"input[name=locationType]"},select:function(e,t){o.triggerHandler({type:"searchbox:change",searchbox_val:e.display})}}),p.on("focus",function(e){_.defer(function(){r?e.target.select():e.target.setSelectionRange(0,9999)})});var d=$(".searchbox_form_type_display"),m=$(".searchbox_form_type");"undefined"!=typeof _feature_hp_search_tsa_enabled&&_feature_hp_search_tsa_enabled&&(d=$(".active .searchbox_form_type_display"),m=$(".active .searchbox_form_type"));var g=$(".searchbox_form");"undefined"!=typeof _feature_hp_search_tsa_enabled&&_feature_hp_search_tsa_enabled&&(g=$(".active .searchbox_form"));var f=$("#search_options"),v=g.attr("action"),b=$("#globalSearchBox input[name=display]"),y=$("#globalSearchBox input[name=tst]");m.val("h"),f.change(function(){var o,t;switch(f.val()){case"for_rent":h.removeClass("hideFully"),u.append(h),o="for rent",t="r";var a={heroImages:["http://static.trulia-cdn.com/images/homepage/rentals_hero_image_140708.jpg"],transitionDelay:5e3,transitionDuration:2e3};e.setOptions(a);break;case"for_sale":h.addClass("hideFully"),h.insertAfter(u),o="for sale",t="h";break;case"sold":h.addClass("hideFully"),h.insertAfter(u),o="sold",t="h"}d.val(o),c&&(t="h"),m.val(t),b.val(o),y.val(t)});var I=f.data("previous-selection");if(I&&(f.val(I),f.change()),$("#searchTabContents .searchbox_form").on("click",function(){$(this).is("#searchbox_form_find_hp")?c=!1:(c=!0,f.change()),p.autosuggest({data:{isSellerSearchType:c}})}),i.isDefault){var k=t.find(".box-holder"),x=k.find("h1"),H=$("#global-sub-nav"),S=H.offset(),C=!1,w=t.find(".get_our_apps");a||r||o.on("scroll",function(){if(S&&o.scrollTop()>S.top?w.addClass("hideFully"):w.removeClass("hideFully"),o.scrollTop()+H.outerHeight()>=x.offset().top+x.outerHeight())"0"===k.css("opacity")||C||(k.stop(!0,!0).animate({opacity:0},250),$(document).trigger("heroBanner_searchBox_hide"),C=!0);else if(o.scrollTop()+H.outerHeight()>=x.offset().top){"0"===k.css("opacity")&&C&&($(document).trigger("heroBanner_searchBox_show"),C=!1);var e=(o.scrollTop()+H.outerHeight()-x.offset().top)/x.outerHeight(),t=.25;k.stop(!0,!0).css({opacity:1-e*t})}else"1"!==k.css("opacity")&&(k.stop(!0,!0).animate({opacity:1}),C=!1,$(document).trigger("heroBanner_searchBox_show"))}),r&&o.on("scroll",function(){o.scrollTop()+H.outerHeight()>=x.offset().top+x.outerHeight()?C||(k.css({zIndex:-9999}),C=!0,$(document).trigger("heroBanner_searchBox_hide")):C&&(k.css({zIndex:"auto"}),C=!1,$(document).trigger("heroBanner_searchBox_show"))});var T=a?"orientationchange":"resize",E;o.on(T,function(){o.height()<500&&250!==E?(E=250,t.find(".banner").height(E)):o.height()>=500&&o.height()<750?(E=500-(750-o.height()),n&&(E-=l),t.find(".banner").height(E)):o.height()>750&&500!==E&&(E=500,n&&(E=425),t.find(".banner").height(E))}),o.trigger(T),p.on("keyup",function(){var e=$(this).val();o.triggerHandler({type:"searchbox:change",searchbox_val:e})}),o.on("searchbox:change",function(e){p.val()!==e.searchbox_val&&(p.val(e.searchbox_val),$('.searchbox_form input[name="locationId"]').val()&&$('.searchbox_form input[name="locationId"]').val(""))})}e.track(),o.triggerHandler("scroll")},e.start=function(){this.options.heroVideo?this.loadHero():this.preloadHeroImage(this.options.heroImages[0],function(e){e.options.heroImages&&e.options.heroImages.length>0&&(e.loadHero(),e.changeHeroImageByIndex(0),e.options.heroImages.length>1&&e.startHeroImageTransition())})},e.startHeroImageTransition=function(){var e=this;this.heroImageIntervalHandler=setInterval(function(){e.nextHeroImage()},this.options.transitionDelay)},e.stopHeroImageTransition=function(){clearInterval(this.heroImageIntervalHandler)},e.previousHeroImage=function(){var e=d-1;this.changeHeroImageByIndex(0>e?0:e)},e.nextHeroImage=function(){var e=d+1;this.changeHeroImageByIndex(e<this.options.heroImages.length?e:0)},e.changeHeroImageByIndex=function(e){if(e>=0&&e<this.options.heroImages.length){var o=d;d=e;var t=$(".heroImage"),a=$(t[e]),r=$(t[o]);o!=d&&r.fadeOut(this.options.transitionDuration),a.fadeIn(this.options.transitionDuration)}},e.preloadHeroImage=function(e,o){var t=this;$("<img>").attr("src",e).load(function(){$(this).remove(),o(t)})},e.loadHero=function(){if(!p){if(this.options.heroVideo){var e=$('<video autoplay="autoplay" loop="loop" muted="muted" poster="'+this.options.heroVideo.poster+'" style="top: 0px; left: 0px; height: auto; width: 100%; position: absolute;"><source src="'+this.options.heroVideo.webm+'" type="video/webm"><source src="'+this.options.heroVideo.mp4+'" type="video/mp4"></video>');"function"==typeof this.options.heroVideo.clickCallback&&e.click(this.options.heroVideo.clickCallback),$("body section#modulesTop").css({position:"relative"}),$("#search .container").before(e)}else for(var o=0;o<this.options.heroImages.length;o++){var t=this.options.heroImages[o],e=$('<div class="heroImage" style="background-image: url(\''+t+"')\"></div>");$("#search .container").before(e.hide())}p=!0}},e.prevalidateSearchInit=function(){var e=$(".searchbox_form"),o=$(".searchbox_form_location"),t=$("button.submit");o.on("focus",function(e){$(this).removeClass("error-field")}),trulia.browser.isMSIE&&trulia.browser.version<=7&&t.on("click",function(o){e.triggerHandler("submit")!==!1&&e[0].submit()}),e.on("submit",function(e){return e.preventDefault(),o=$(this).find($(".searchbox_form_location")),o.is(":focus")&&o.blur(),o.val().length<=0?(o.addClass("error-field"),!1):void this.submit()})},e.track=function(){$("#searchbox_form").on("submit",function(){var e=$(this);trulia.track({props:{33:s.pageName+"|heroBanner|search_form|submit|"+e.find("#search_options").val()}})}),$("#searchbox_form_location").on("focus",function(){trulia.track({props:{33:s.pageName+"|heroBanner|search_input|focus"}})}),$("#search_options").on("change",function(){var e=$(this);trulia.track({props:{33:s.pageName+"|heroBanner|search_options|changed|"+e.val()}})})},e}(jQuery),trulia=trulia||{},trulia.homepage=trulia.homepage||{},trulia.homepage.mobileModule={},trulia.homepage.mobileModule=function($){var e={};return e.previousSmsHash="",e.init=function(){var o=$("#form-mobile"),t=$(".sms-status"),a=$("#sms_submit"),r=$("#sms_phone1"),i=$("#sms_phone2"),n=$("#sms_phone3"),l=$("#sms_phone");a.on("click",function(o){o.preventDefault();var a=$("#form-mobile").serialize();e.previousSmsHash!==a&&(t.addClass("typeLowlight").removeClass("typeWarning typeHighlight").html("In progress..."),e.previousSmsHash=a),trulia.sms.sendMobileApp("#form-mobile")}),o.on("sms:submit",function(e,a){switch(a){case"error":case"invalid_phone":t.addClass("typeWarning").removeClass("typeLowlight typeHighlight").html("Please correct your phone number."),o.find(".field").addClass("fieldWarning"),trulia.track({props:{33:s.pageName+"|mobile|mobile_form|submit|failure"}});break;default:t.addClass("typeHighlight").removeClass("typeLowlight typeWarning").html("Success! We've sent you a link to download the app."),trulia.track({props:{33:s.pageName+"|mobile|mobile_form|submit|success"}})}}),o.on("keyup change","input:text",function(e){(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105)&&($(this).is(r)&&3===$(this).val().length?i.focus():$(this).is(i)&&3===$(this).val().length?n.focus():$(this).is(n)&&4===$(this).val().length&&a.focus()),l.val(r.val()+i.val()+n.val())}),o.find("input:text").on("focus",function(e){$(this).parents(".field").removeClass("fieldWarning"),this.select()}),e.track()},e.track=function(){var e=$("#content");e.on("focus","#sms_phone1",function(){trulia.track({props:{33:s.pageName+"|mobile|mobile_number|focus"}})})},e}(jQuery),trulia.sms=function(){var e={};return e.previousSmsHash="",e.ERROR_INVALID_PHONE="invalid_phone",e.ERROR_SEND="error",e.SUCCESS_STATUS="success",e.sendMobileApp=function(o){var t=$(o),a=t.serialize()+o;if(a!==e.previousSmsHash){if(e.previousSmsHash=a+o,!is_valid_phone($("#sms_phone",t).val()))return $(t).trigger("sms:submit",[e.ERROR_INVALID_PHONE]),$(o+" .sms_error").html("Oops! Please correct your phone number.  eg: (XXX) XXX-XXXX"),void $(".sms_error",t).css("display","block");var r="";$(":input",t).each(function(){r+=$(this).attr("name")+"="+$(this).val()+"&"});var i=getHTTPObject();i.open("GET",site_root+"q_sms.php?"+r,!0),i.onreadystatechange=function(){if(4==i.readyState){var o=i.responseText;"1"==o?($(t).trigger("sms:submit",[e.SUCCESS_STATUS]),$(".sms_progress").css("display","none"),$(".sms_success").css("display","block")):($(t).trigger("sms:submit",[e.ERROR_SEND]),$(".sms_progress").css("display","none"),$(".sms_error").css("display","block"),$(".sms_error").html("Oops! an error has occurred. Please try again later."))}},$(".sms_container").css("display","none"),$(".sms_error").css("display","none"),$(".sms_progress").css("display","block"),i.send(null)}},e}(),window.submit_sms=trulia.sms.sendMobileApp,trulia.mobile_app_screenshots=function(e){var o=$("#thumb1");$("#thumbs a.toggle").each(function(){var t=new Image;t.src=_IMAGE_SERVER_ROOT+"/images/mobile/"+$(this).attr("rel"),$(this).mouseover(function(){var t=$(this);$(e).attr("src",_IMAGE_SERVER_ROOT+"/images/mobile/"+t.attr("rel")),o&&(o.removeClass(o.attr("id")+"Start"),o.addClass(o.attr("id"))),t.removeClass(t.attr("id")),t.addClass(t.attr("id")+"Start"),o=t})})},$(document).ready(function(){if("undefined"!=typeof thumb_preloads)for(var e in thumb_preloads){var o=new Image;o.src=_IMAGE_SERVER_ROOT+"/images/mobile/"+thumb_preloads[e]}1==$("#type_android").length?trulia.mobile_app_screenshots("#androidSrc"):1==$("#type_iphone").length&&trulia.mobile_app_screenshots("#iphoneSrc")});